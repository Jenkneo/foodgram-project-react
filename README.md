# –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫ 

![preview img](frontend/public/favicon.png)
  
## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞  
  
Foodgram - –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, 
–ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 
–¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è —Ä–µ—Ü–µ–ø—Ç—ã –≤ —Å–ø–∏—Å–æ–∫ ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª, 
–∏ –ø–µ—Ä–µ–¥ –ø–æ—Ö–æ–¥–æ–º –≤ –º–∞–≥–∞–∑–∏–Ω —Å–∫–∞—á–∏–≤–∞—Ç—å —Å–≤–æ–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, 
–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–ª—é–¥.  

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ API –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç—É: /api/redoc  

>‚ù§ Frontend –Ω–∞ React —Å–æ–∑–¥–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –∏–∑ [–Ø–Ω–¥–µ–∫—Å –ü—Ä–∞–∫—Ç–∏–∫—É–º](https://practicum.yandex.ru/)


## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
<img src="https://img.shields.io/badge/Python%203.7-grey?style=for-the-badge&logo=Python&logoColor=Blue"> <img src="https://img.shields.io/badge/Django%203.2-grey?style=for-the-badge&logo=Django&logoColor=darkgreen"> <img src="https://img.shields.io/badge/DRF%203.12.0-grey?style=for-the-badge&logo=Django&logoColor=white"> <img src="https://img.shields.io/badge/Gunicorn%2020.0.4-grey?style=for-the-badge&logo=Gunicorn&logoColor=green"> <img src="https://img.shields.io/badge/Nginx%201.19.3-grey?style=for-the-badge&logo=Nginx&logoColor=black"> <img src="https://img.shields.io/badge/PostgreSQL%2013.0-grey?style=for-the-badge&logo=PostgreSQL&logoColor=Blue"> <img src="https://img.shields.io/badge/Docker%2020.10.23-grey?style=for-the-badge&logo=Docker&logoColor=Blue"> <img src="https://img.shields.io/badge/Docker Compose%202.15.1-grey?style=for-the-badge&logo=Docker&logoColor=Blue"> <img src="https://img.shields.io/badge/React-ca7370?style=for-the-badge&logo=React&logoColor=lightBlue">


## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞  
  
1. üîΩ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```      
git clone https://github.com/Jenkneo/foodgram-project-react
```
2. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
``` 
# –°–æ–∑–¥–∞–π—Ç–µ –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–∞–ø–∫—É nginx
mkdir nginx

#–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker-compose
sudo apt install docker.io
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```  
3. üîß –õ–æ–∫–∞–ª—å–Ω–æ —Å–æ–±–µ—Ä–∏—Ç–µ frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∑–∞–ø—É—à—å—Ç–µ –µ–≥–æ –Ω–∞ dockerhub
```
docker push docker/getting-started
```
> –ü–æ–¥—Ä–æ–±–Ω–µ–µ –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä - [—Ç—É—Ç](https://docs.docker.com/get-started/04_sharing_app/)


4. ‚úèÔ∏è –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker-compose.yaml (14 –∏ 28 —Å—Ç—Ä–æ–∫–∞):
```
image: <–≤–∞—à-dockerhub>/foodgram-project-react:latest
```

5. üì§ –û—Ç–ø—Ä–∞–≤—å—Ç–µ docker-compose.yml –∏ nginx.conf –Ω–∞ –≤–∞—à —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
``` 
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ docker-compose.yaml –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–µ—Ä–≤–µ—Ä–∞
scp -rv C:\<–ø—É—Ç—å_–¥–æ_—Ñ–∞–π–ª–∞>\docker-compose.yaml <–≤–∞—à_username>@<ip_—Å–µ—Ä–≤–µ—Ä–∞>:/home

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ nginx.conf –≤ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É nginx
scp -rv C:\<–ø—É—Ç—å_–¥–æ_—Ñ–∞–π–ª–∞>\nginx\default.conf <–≤–∞—à_username>@<ip_—Å–µ—Ä–≤–µ—Ä–∞>:/home/nginx
``` 
6. ‚úèÔ∏è –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ github –¥–æ–±–∞–≤—å—Ç–µ secret –¥–∞–Ω–Ω—ã–µ.  `Settings - Secrets and variables - Actions`:
``` 
DB_NAME - –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ù–∞–ø—Ä–∏–º–µ—Ä - postgres)
DB_USER - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ù–∞–ø—Ä–∏–º–µ—Ä - postgres)
DB_PASSWORD - –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ù–∞–ø—Ä–∏–º–µ—Ä - postgres)

DOCKER_USERNAME - –õ–æ–≥–∏–Ω –æ—Ç DockerHub
DOCKER_PASSWORD - –ü–∞—Ä–æ–ª—å –æ—Ç DockerHub

SSH_HOST - IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
SSH_KEY - id_rsa –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
SSH_USER - –ª–æ–≥–∏–Ω –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
``` 

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞  
1. üîº –ó–∞–ø—É—à—å—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ github:
```
git push
```
2. ‚åõ –ù–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∫–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
3. ‚öôÔ∏è –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ ssh –∏ —Å–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:  
```  
sudo docker-compose exec backend python manage.py collectstatic --no-input  
```  
4. ‚öôÔ∏è –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏.  
```  
sudo docker-compose exec backend python manage.py makemigrations  
sudo docker-compose exec backend python manage.py migrate  
```  
5. ‚öôÔ∏è –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
```  
sudo docker-compose exec web python manage.py createsuperuser  
```  
6. üîó –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ postgres –∏ –∏–º–ø–æ—Ä–∏—Ç—Ä—É–π—Ç–µ CSV –≤ postgres –∏–∑ –ø–∞–ø–∫–∏ /data.  
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–π–¥—è –ø–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
```
http://<server_ip>/
```
  
## –û –ø—Ä–æ–µ–∫—Ç–µ  
–ò–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞ - [–Ø–Ω–¥–µ–∫—Å –ü—Ä–∞–∫—Ç–∏–∫—É–º](https://practicum.yandex.ru/)